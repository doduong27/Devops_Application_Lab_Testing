jenkins:
  systemMessage: "Jenkins configured automatically by Jenkins Configuration as Code (JCasC)"
  numExecutors: 2
  mode: NORMAL
  # Docker cloud configuration - commented out to prevent boot failure
  # Can be configured manually after Jenkins starts
  # clouds:
  #   - docker:
  #       name: "docker"
  #       dockerApi:
  #         dockerHost:
  #           uri: "unix:///var/run/docker.sock"
  #       containerCap: 10
  #       connectTimeout: 60
  #       readTimeout: 60
  #       credentialsId: ""
  #       instanceCap: 10

  nodes:
    - permanent:
        name: "agent-1"
        nodeDescription: "Docker-enabled Jenkins agent 1"
        remoteFS: "/home/jenkins/agent"
        numExecutors: 2
        labelString: "docker agent-1 linux"
        mode: NORMAL
        retentionStrategy: "always"
        launcher:
          ssh:
            host: "jenkins-agent-1"
            port: 22
            credentialsId: "agent-ssh-credentials"
            sshHostKeyVerificationStrategy:
              nonVerifyingKeyVerificationStrategy: {}
            javaPath: "/usr/bin/java"
            jvmOptions: ""
            prefixStartSlaveCmd: ""
            suffixStartSlaveCmd: ""
            launchTimeoutSeconds: 60
            maxNumRetries: 0
            retryWaitTime: 0
        nodeProperties:
          - envVars:
              env:
                - key: "DOCKER_HOST"
                  value: "unix:///var/run/docker.sock"

    - permanent:
        name: "agent-2"
        nodeDescription: "Docker-enabled Jenkins agent 2"
        remoteFS: "/home/jenkins/agent"
        numExecutors: 2
        labelString: "docker agent-2 linux"
        mode: NORMAL
        retentionStrategy: "always"
        launcher:
          ssh:
            host: "jenkins-agent-2"
            port: 22
            credentialsId: "agent-ssh-credentials"
            sshHostKeyVerificationStrategy:
              nonVerifyingKeyVerificationStrategy: {}
            javaPath: "/usr/bin/java"
            jvmOptions: ""
            prefixStartSlaveCmd: ""
            suffixStartSlaveCmd: ""
            launchTimeoutSeconds: 60
            maxNumRetries: 0
            retryWaitTime: 0
        nodeProperties:
          - envVars:
              env:
                - key: "DOCKER_HOST"
                  value: "unix:///var/run/docker.sock"

  securityRealm:
    local:
      allowsSignup: false
      users:
        - id: "admin"
          name: "Jenkins Admin"
          password: "admin"

  authorizationStrategy:
    loggedInUsersCanDoAnything:
      allowAnonymousRead: false

unclassified:
  location:
    adminAddress: "admin@example.com"
    url: "http://localhost:8080/"

  globalLibraries:
    libraries: []

security:
  scriptApproval:
    # Scripts loaded via JCasC Job DSL are automatically approved
    # Additional approved signatures can be added here if needed
    approvedSignatures: []

tool:
  git:
    installations:
      - name: "Default"
        home: "git"
  maven:
    installations:
      - name: "Maven-3.9"
        properties:
          - installSource:
              installers:
                - maven:
                    id: "3.9.6"

credentials:
  system:
    domainCredentials:
      - credentials:
          - usernamePassword:
              scope: GLOBAL
              id: "agent-ssh-credentials"
              # IMPORTANT: This authentication is only used for lab purposes. For production, use a more secure authentication method.
              # Username and password for the Jenkins agent SSH user.
              # It must be the same as the username and password in the Dockerfile.agent file.
              username: "jenkins"
              password: "jenkins"
              description: "SSH credentials for Jenkins agents - username and password for the Jenkins agent SSH user"

# Jobs configuration
# Jobs are defined in jobs/jobs.yaml using Job DSL syntax
# JCasC will automatically load all YAML files from the configured directory
# Note: Job DSL plugin must be installed for these jobs to be created

